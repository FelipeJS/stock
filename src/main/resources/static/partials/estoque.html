<h1 class="text-center">Estoque</h1>

<p ng-show="mensagem.length" class="alert alert-info">{{mensagem}}</p>

<div class="row">
	<div class="col-md-12">
		<form>
			<div class="input-group">
				<span class="input-group-btn">
					<a type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalCadastroEstoque" ng-click="novoEstoque()">Cadastrar Estoque</a>
				</span>
				<input class="form-control" placeholder="Filtrar" ng-model="filtro">
			</div>
		</form>
	</div>
</div>

<div class="row">
	<meu-painel class="col-md-12" titulo="Estoques" >
		
	</meu-painel>
</div>

	<table id="estoques" class="table table-striped table-bordered" cellspacing="0" width="100%">
			<thead>
				<tr>
					<th>Código</th>
					<th>Descrição</th>
					<th>Ativo</th>
					<th>Opções</th>
				</tr>
			</thead>
		    <tbody>
				<tr ng-repeat="estoque in estoques | filter: filtro">
					<td>{{estoque.codigoEstoque}}</td>
					<td>{{estoque.descricao}}</td>
					<td>{{estoque.ativo}}</td>
					<td class="text-center">
						<button class="btn btn-info" data-toggle="modal" data-target="#modalCadastroEstoque" ng-click="editarEstoque(estoque)">Editar</button>
						<button class="btn btn-danger" ng-click="removerEstoque(estoque)">Excluir</button>
					</td>
				</tr>
			</tbody>
		</table>


<div id="modalCadastroEstoque" class="modal fade" role="dialog">
	<div class="modal-dialog">
	
	    <div class="modal-content">
			<form name="cadastro" ng-submit="salvarEstoque()" novalidate>
		        
		        <div class="modal-header">
		        	<button type="button" class="close" data-dismiss="modal">&times;</button>
		        	<h4 class="modal-title">Cadastro de Estoque</h4>
		        </div>
		        
		        <div class="modal-body">
		        	<p ng-show="mensagemModal.length" class="alert alert-info">{{mensagemModal}}</p>
		        	
					<div class="form-group">
						<label for="codigo">Código:</label>
						<input id="codigo" name="codigo" type="text" placeholder="Código" class="form-control" ng-model="estoque.codigoEstoque" required="required" />
						<span ng-show="cadastro.$submitted && cadastro.codigo.$error.required" class="form-control alert-danger">
							Código obrigatório
						</span>
					</div>
				
					<div class="form-group">
						<label for="descricao">Descrição:</label>
						<input id="descricao" name="descricao" type="text" placeholder="Descrição" class="form-control" ng-model="estoque.descricao" required="required"/>
						<span ng-show="cadastro.$submitted && cadastro.descricao.$error.required" class="form-control alert-danger">
							Descrição obrigatória
						</span>
					</div>
		        </div>
	        
		        <div class="modal-footer">
		        	<button type="submit" class="btn btn-primary" ng-disabled="cadastro.$invalid">Salvar</button>
		          	<button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
		        </div>
		        
    		</form>
	    </div><!-- modal-content -->
	</div><!-- modal-dialog -->
</div><!-- modal -->
  
 <script>
 	$(document).ready(function() {
	    $('#estoques').DataTable({
	    	"searching": false,
	    	"lengthChange": false
	    });
	});
 </script>